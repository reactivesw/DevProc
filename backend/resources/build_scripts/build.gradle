/*
 * The root build script file.
 * The "buildscript" section has to be the first item in the root file.
 * we use the syntax as generated by IntelliJ IDE
 */

buildscript {
  ext { springBootVersion = '1.4.2.RELEASE' }

  repositories {
    mavenCentral()
    maven {
      url 'https://plugins.gradle.org/m2/'
      url 'https://repo.spring.io/libs-milestone'
    }
  }

  dependencies {
    // for spring boot
    classpath("org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}")

    //for docker build
    classpath('se.transmode.gradle:gradle-docker:1.2')

    // for unit test code coverage  -- need to find a way to put it in its file
    classpath('com.palantir:jacoco-coverage:0.4.0')

    //for proto buffer
    classpath('com.google.protobuf:protobuf-gradle-plugin:0.8.0')
  }
}

// init repository, java, wrapper
apply from: 'buid_scripts/build_setups.gradle'

// init application version settings
apply from: 'build_scripts/application_version.gradle'

// application build script
apply from: 'build_scripts/application_dependencies.gradle'

//build grpc files
apply from: 'build_scripts/grpc_build.gradle'

// build docker image task
apply from: 'build_scripts/docker_build.gradle'

// these two files are for code analyzer, unit test and code coverage check
apply from: 'code_analyzer_test_local/code_analyzer.gradle'
apply from: 'code_analyzer_test_local/code_test_coverage.gradle'

